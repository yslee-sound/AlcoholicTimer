# Firebase 이벤트 최종 검증 테스트 가이드

이 문서는 앱에 구현된 모든 Firebase 분석 이벤트가 정상적으로 동작하는지 확인하는 방법을 안내합니다.

## ✅ 테스트 준비

1.  **테스트 기기 연결**: 안드로이드 스튜디오에 실제 테스트용 스마트폰을 연결합니다.
2.  **디버그 모드로 앱 실행**: 앱을 '디버그(debug)' 모드로 실행합니다.
3.  **Logcat 창 열기**: 안드로이드 스튜디오 하단에서 `Logcat` 탭을 선택합니다.
4.  **검색창 필터링**: Logcat 검색창에 `AnalyticsManager`라고 입력하여 관련 로그만 확인합니다.
5.  **Firebase DebugView 열기**: Firebase 콘솔에서 `DebugView` 메뉴로 이동하여 테스트 기기를 선택합니다.

---

## 💡 문제 해결: DebugView에 기기가 표시되지 않는 경우

에뮬레이터로 테스트할 때 DebugView에 기기가 바로 나타나지 않는다면, **분석 디버그 모드**가 활성화되지 않아서 그렇습니다.

디버그 빌드는 패키지 이름 끝에 `.debug`가 추가되므로, 아래의 **정확한 명령어**를 안드로이드 스튜디오의 **Terminal** 창에 복사하여 실행하면 즉시 해결됩니다.

```bash
# 'emulator-5554' 에뮬레이터에 디버그 모드 활성화
adb -s emulator-5554 shell setprop debug.firebase.analytics.app kr.sweetapps.alcoholictimer.debug
```

**참고**: 테스트가 끝나면 아래 명령어로 디버그 모드를 비활성화할 수 있습니다. (끄는 명령어는 패키지 이름 없이 `.none.`을 사용하는 것이 맞습니다.)

```bash
# 'emulator-5554' 에뮬레이터에서 디버그 모드 비활성화
adb -s emulator-5554 shell setprop debug.firebase.analytics.app .none.
```

---

## 🧪 이벤트별 테스트 방법

아래 순서에 따라 앱의 각 기능을 사용하며 Logcat과 DebugView에 이벤트가 올바르게 기록되는지 확인하세요.

| 테스트할 기능 | 실행할 행동 | 확인할 이벤트명 |
| :--- | :--- | :--- |
| **1. 금주 시작** | 새로운 금주 목표를 설정하고 **타이머를 시작**하세요. | `timer_start` |
| **2. 기록 보기** | 하단 탭에서 **기록** 메뉴로 이동하여 과거 기록 목록을 확인하세요. | `view_records` |
| **3. 광고 수익/노출** | 앱을 사용하다 보면 **전면 광고**가 표시됩니다. 광고가 화면에 나타나는 것을 확인하세요. | `ad_impression`<br/>`ad_revenue` |
| **4. 금주 중도 포기** | 진행 중인 금주 목표를 **'종료' 버튼을 길게 눌러** 중도에 포기하세요. | `timer_end` |
| **5. 금주 목표 달성** | (테스트를 위해) **짧은 시간의 목표를 새로 설정**하고, 목표 시간이 **완료**될 때까지 기다리세요. | `timer_finish` |

**참고**: `ad_click` 이벤트는 실제 광고를 클릭해야 발생하며, 테스트 환경에서는 검증이 어려울 수 있습니다.

---

모든 테스트 단계에서 Logcat과 DebugView에 해당 이벤트 이름이 나타나면, 모든 이벤트가 성공적으로 구현된 것입니다.
