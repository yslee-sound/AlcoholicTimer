네, 알겠습니다. 제공해주신 **기존 검증 테스트 가이드** 문서의 형식을 그대로 유지하고, 저희가 최종적으로 정의한 \*\*새로운 핵심 이벤트(`change_record_view`, `ad_click`, `timer_finish`의 세부 검증)\*\*와 **필수 매개변수 확인 항목**을 통합하여 **최종 검증 테스트 가이드**를 완성해 드립니다.

## 📝 Firebase 이벤트 최종 검증 테스트 가이드 (최종 완성본)

이 문서는 앱에 구현된 모든 Firebase 분석 이벤트가 정상적으로 동작하고, **LTV/ROAS 최적화에 필요한 핵심 매개변수**를 포함하는지 확인하는 방법을 안내합니다.

-----

## ✅ 테스트 준비

1.  **테스트 기기 연결**: 안드로이드 스튜디오에 실제 테스트용 스마트폰을 연결합니다.
2.  **디버그 모드로 앱 실행**: 앱을 **'디버그(debug)' 모드**로 실행합니다.
3.  **Logcat 창 열기**: 안드로이드 스튜디오 하단에서 `Logcat` 탭을 선택합니다.
4.  **검색창 필터링**: Logcat 검색창에 `AnalyticsManager`라고 입력하여 관련 로그만 확인합니다.
5.  **Firebase DebugView 열기**: Firebase 콘솔에서 `DebugView` 메뉴로 이동하여 테스트 기기를 선택합니다.

-----

## 💡 문제 해결: DebugView에 기기가 표시되지 않는 경우

에뮬레이터로 테스트할 때 DebugView에 기기가 바로 나타나지 않는다면, **분석 디버그 모드**가 활성화되지 않아서 그렇습니다.

디버그 빌드는 패키지 이름 끝에 `.debug`가 추가되므로, 아래의 **정확한 명령어**를 안드로이드 스튜디오의 **Terminal** 창에 복사하여 실행하면 즉시 해결됩니다.

```bash
# 'emulator-5554' 에뮬레이터에 디버그 모드 활성화
adb -s emulator-5554 shell setprop debug.firebase.analytics.app kr.sweetapps.alcoholictimer.debug
```

**중요**: 위 명령어 실행 후에는, **앱을 완전히 종료했다가 다시 실행**해야 합니다. 아래 명령어로 앱을 강제 종료하면 가장 확실합니다.

```bash
# 앱 강제 종료 (활성화 후 1회 실행)
adb -s emulator-5554 shell am force-stop kr.sweetapps.alcoholictimer.debug
```

테스트가 끝나면 아래 명령어로 디버그 모드를 비활성화하는 것을 권장합니다. (끄는 명령어는 패키지 이름 없이 `.none.`을 사용하는 것이 맞습니다.)

```bash
# 'emulator-5554' 에뮬레이터에서 디버그 모드 비활성화
adb -s emulator-5554 shell setprop debug.firebase.analytics.app .none.
```

-----

## ⚠️ 에뮬레이터에서 디바이스가 표시되지 않을 때 추가 체크리스트

**Google Play 서비스가 설치되어 있어도, 반드시 Play 스토어 앱을 한 번 실행해야 Firebase Analytics가 정상 동작합니다.**

- Play 서비스가 설치만 되어 있고 활성화되지 않은 경우, 이벤트가 서버로 전송되지 않아 DebugView에 기기가 표시되지 않습니다.
- 앱을 실행하기 전에 Play 스토어 앱을 먼저 실행하면, 이후 모든 이벤트가 정상적으로 기록됩니다.
- Play 스토어 앱을 실행하지 않으면 Google Play 서비스가 활성화되지 않아 DebugView에 디바이스가 표시되지 않습니다.
- Play 스토어 앱을 실행 후 앱을 재실행하면, DebugView에 1\~2분 내에 디바이스가 정상적으로 표시됩니다.

-----

## 🧪 이벤트별 테스트 방법 및 필수 매개변수 검증

아래 순서에 따라 앱의 각 기능을 사용하며 **Logcat**과 **DebugView**에 이벤트가 올바르게 기록되는지 확인하세요.

| 테스트할 기능 | 실행할 행동 | 확인할 이벤트명 | 필수 매개변수 (DebugView 확인) |
| :--- | :--- | :--- | :--- |
| **1. 금주 시작** | 새로운 금주 목표를 설정하고 **타이머를 시작**하세요. | `timer_start` | `target_days` (금주 목표일) |
| **2. 금주 목표 달성** | **짧은 시간의 목표를 새로 설정**하고 완료될 때까지 기다리세요. | `timer_finish` | `target_days` (금주 목표일) |
| **3. 금주 중도 포기** | 진행 중인 금주 목표를 **'종료' 버튼을 길게 눌러** 중도에 포기하세요. | `timer_end` | (없음) |
| **4. 기록 화면 진입** | 하단 탭에서 **기록** 메뉴로 이동하여 과거 기록 목록을 확인하세요. | `view_records` | (없음) |
| **5. 통계 뷰 변경 (신규)** | 기록 화면에서 **'월' 통계에서 '년' 통계로** 스위치를 변경하세요. | `change_record_view` | `view_type` (예: "Year"), `current_level` |
| **6. 기록 상세 조회** | 기록 목록에서 **특정 기록 카드**를 눌러 세부 내용을 확인하세요. | `view_record_detail` | `record_id` |
| **7. 광고 노출/수익** | 앱을 사용하다 보면 **전면 광고**가 표시됩니다. 광고 화면이 나타나는 것을 확인하세요. | `ad_impression`<br>`ad_revenue` | `ad_type`, `value` (수익 금액), `currency` |
| **8. 광고 클릭 (신규)** | 테스트용 광고를 **클릭**하여 브라우저로 이동하는 것을 확인하세요. | `ad_click` | `ad_type` |

**참고**: `ad_click` 이벤트는 테스트 환경에서 실제 광고주에게 비용이 발생할 수 있으니, 검증 후에는 클릭을 자제해 주십시오.

-----

모든 테스트 단계에서 Logcat과 DebugView에 해당 이벤트 이름과 **필수 매개변수**가 나타나면, 모든 이벤트가 성공적으로 구현된 것입니다.