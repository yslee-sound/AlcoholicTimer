# 현재 상황
- supabase key와 firebase key가 노출되었다는 경고가 있었습니다.
- 그래서 현재 프로젝트 정리(clean) 작업을 진행하고 있습니다.
- 민감 정보는 코드에 직접 작성하지 않고 local.properties 등 로컬 전용 파일과 비밀관리 절차로 다루기로 합니다.
- local 의 .git 폴더는 이미 여러번 삭제 했어
- GitHub에서 기존 원격 리포지터리는 삭제했습니다. 로컬에서 검증·정리 후 새 리포지터리를 생성하고 푸시할 계획입니다.
- Firebase 키는 삭제(회수)했고 재발급 예정입니다.
- Supabase 키의 교체(회전)는 앱의 광고 폴백(연결 실패 시 기본 광고 동작) 버전을 먼저 릴리스한 뒤 안전하게 진행할 예정입니다.

# 내가 덧붙이는 요약 및 권장 조치 (간단)
1. 노출 가능성 평가
   - 노출 여부가 불명확하면 즉시 해당 키(특히 service_role)는 회전(rotate)하세요. 공개·추적된 커밋이 있었다면 우선 회전이 최우선입니다.
2. 로컬 정리
   - local.properties, local.properties.bak, supabase.key, google-services.json 등은 .gitignore에 반드시 추가되어야 합니다.
   - 로컬에 남아있는 민감값은 파일 내용을 마스킹하거나 파일 자체를 안전한 장소로 이동/삭제하세요.
3. 커밋 히스토리 정리 (필요 시)
   - 민감값이 과거 커밋에 포함되었다면 git-filter-repo 또는 BFG를 사용해 히스토리에서 제거하고 새 리포에 푸시하세요. (절차 전에 키는 회전)
   - 정리 전 반드시 레포 전체 백업을 만드세요.
4. 전체 검사
   - 커밋 히스토리 포함 전수 스캔을 실행하여 남아있는 노출 지점을 확인하세요(제공된 스캔 스크립트 또는 trufflehog, detect-secrets 등).
5. 배포·릴리스 절차
   - 폴백 버전 릴리스 후 키 교체를 진행한다면, 새 키는 CI 비밀(또는 안전한 비밀 저장소)에 등록하고 코드엔 절대 직접 포함시키지 마세요.
6. 보안·모니터링
   - 키 회전 후 서비스 로그·계정 이상 징후를 확인하고, 필요한 경우 권한 축소·추가 알림 설정을 하세요.
7. 예방 조치
   - pre-commit 훅(예: detect-secrets), 정적 스캔, 리포지터리 시크릿 스캔 활성화 등을 도입하세요.

# 권장 체크리스트 (우선순위)
- [ ] 민감키 회전 여부 결정 및 회전(노출 의심 시 즉시)
- [ ] 로컬 민감파일(.properties, supabase.key 등) 정리 및 .gitignore 확인
- [ ] 전체(히스토리 포함) 스캔 실행
- [ ] 필요 시 히스토리 정리(BFG/git-filter-repo) 및 새 리포지터리 생성 후 푸시
- [ ] 새 키는 비밀 저장소(CI/환경변수)로 관리, 코드에 포함 금지
- [ ] 릴리스 후 서비스 로그 모니터링

# 다음 권장 작업 (내가 도와줄 수 있는 것)
- 전체 레포 스캔(히스토리 포함) 실행 및 결과 요약
- .gitignore 검토 및 필요한 항목 추가
- local.properties.bak 등 파일 마스킹 또는 제거 적용
- 히스토리 정리 절차 안내 또는 자동화 지원

(간결히 정리했습니다. 수정·추가 원하면 알려주세요.)
