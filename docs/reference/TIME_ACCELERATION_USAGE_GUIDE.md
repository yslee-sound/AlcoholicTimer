# 시간 배속 기능 사용 가이드

**최종 업데이트**: 2025년 12월 4일  
**대상**: 개발자 및 QA 테스터

---

## 📖 목차
1. [기능 개요](#기능-개요)
2. [실시간 경과 시간표](#실시간-경과-시간표)
3. [단계별 사용 방법](#단계별-사용-방법)
4. [배속별 테스트 시나리오](#배속별-테스트-시나리오)
5. [주의사항](#주의사항)

---

## 기능 개요

**시간 배속(Time Acceleration)**은 장기간 진행되는 금주 타이머를 빠르게 테스트하기 위한 디버그 전용 기능입니다.

### 핵심 원리
- ✅ 실제 시스템 시간은 **절대 변경하지 않음**
- ✅ "1일의 길이"만 재정의하여 경과 일수 계산 배속화
- ✅ 타이머 시작 시간(`startTime`)은 그대로 유지
- ⚡ 최대 **10000배속** 지원 (1일을 8.64초로 단축!)

---

## 실시간 경과 시간표

### 📊 배속별 비교표

> **📌 표 읽는 방법**:
> - **좌측 "실제 경과 시간"**: 실제로 흐른 시간 (예: 1초, 10분, 1시간)
> - **각 배속 칸**: 앱에서 "몇 일 경과"로 계산되는지 표시
> - **예**: 실제 10분 경과 + 60배속 설정 = 앱에서 "0.42일 경과"로 표시

#### 1️⃣ 초 단위 (1초 ~ 60초)

| 실제 경과 시간 | 1배속 (정상) | 10배속 | 60배속 | 100배속 | 1000배속 | 10000배속 |
|--------------|-------------|--------|--------|---------|----------|-----------|
| **1초** | 0.00001일 | 0.0001일 | 0.0006일 | 0.001일 | 0.01일 | 0.12일 |
| **8.64초** | 0.0001일 | 0.001일 | 0.006일 | 0.01일 | 0.1일 | **1일 ✅** |
| **10초** | 0.0001일 | 0.001일 | 0.006일 | 0.01일 | 0.12일 | 1.16일 |
| **30초** | 0.0003일 | 0.003일 | 0.02일 | 0.03일 | 0.35일 | 3.47일 |
| **60초 (1분)** | 0.0007일 | 0.007일 | 0.04일 | 0.07일 | 0.69일 | 6.94일 |
| **86.4초 (1.44분)** | 0.001일 | 0.01일 | 0.06일 | 0.1일 | **1일 ✅** | 10일 |

> 💡 **해석 방법**: "실제 1초 경과 시 10000배속이면 0.12일(약 2.9시간) 경과한 것으로 계산됨"  
> ⚡ **10000배속 특징**: 8.64초만 경과하면 1일 달성!

#### 2️⃣ 분 단위 (1분 ~ 60분)

| 실제 경과 시간 | 1배속 (정상) | 10배속 | 60배속 | 100배속 | 1000배속 | 10000배속 |
|--------------|-------------|--------|--------|---------|----------|-----------|
| **1분** | 0.0007일 | 0.007일 | 0.04일 | 0.07일 | 0.69일 | 6.94일 |
| **2.6분** | 0.002일 | 0.02일 | 0.11일 | 0.18일 | 1.8일 | 18.06일 |
| **4.32분** | 0.003일 | 0.03일 | 0.18일 | 0.3일 | 3일 | **30일 ✅** |
| **5분** | 0.003일 | 0.03일 | 0.21일 | 0.35일 | 3.47일 | 34.72일 |
| **10분** | 0.007일 | 0.07일 | 0.42일 | 0.69일 | 6.94일 | 69.44일 |
| **30분** | 0.02일 | 0.21일 | 1.25일 | 2.08일 | 20.83일 | 208.33일 |
| **43.2분** | 0.03일 | 0.3일 | 1.8일 | 3일 | **30일 ✅** | 300일 |
| **60분 (1시간)** | 0.04일 | 0.42일 | 2.5일 | 4.17일 | 41.67일 | 416.67일 |

> 💡 **예시**: "실제 10분 경과 시 10000배속이면 69.44일 경과한 것으로 계산됨"  
> ⚡ **10000배속 특징**: 4.32분(약 4분)만 경과하면 30일 목표 달성!

#### 3️⃣ 시간 단위 (1시간 ~ 24시간)

| 실제 경과 시간 | 1배속 (정상) | 10배속 | 60배속 | 100배속 | 1000배속 | 10000배속 |
|--------------|-------------|--------|--------|---------|----------|-----------|
| **4.32분 (0.072시간)** | 0.003일 | 0.03일 | 0.18일 | 0.3일 | 3일 | **30일 ✅** |
| **43.2분 (0.72시간)** | 0.03일 | 0.3일 | 1.8일 | 3일 | **30일 ✅** | 300일 |
| **1시간** | 0.04일 | 0.42일 | 2.5일 | 4.17일 | 41.67일 | 416.67일 |
| **3시간** | 0.13일 | 1.25일 | 7.5일 | 12.5일 | 125일 | 1250일 |
| **6시간** | 0.25일 | 2.5일 | 15일 | 25일 | 250일 | 2500일 |
| **7.2시간** | 0.3일 | 3일 | 18일 | **30일 ✅** | 300일 | 3000일 |
| **12시간** | 0.5일 | 5일 | **30일 ✅** | 50일 | 500일 | 5000일 |
| **24시간 (1일)** | 1일 | 10일 | 60일 | 100일 | 1000일 | 10000일 |

✅ = 목표 30일 달성

> **🔍 구체적 예시**:
> - **정상 모드 (1배속)**: 실제 24시간 경과 → 앱에서 "1일 경과"로 표시
> - **60배속 모드**: 실제 24시간 경과 → 앱에서 "60일 경과"로 표시
> - **100배속 모드**: 실제 7.2시간만 경과해도 → 앱에서 "30일 달성"으로 표시!
> - **1000배속 모드**: 실제 43.2분(약 43분)만 경과해도 → 앱에서 "30일 달성"으로 표시! ⚡
> - **10000배속 모드**: 실제 4.32분(약 4분)만 경과해도 → 앱에서 "30일 달성"으로 표시! 🚀

---

## 단계별 사용 방법

### 🎬 Step 1: 디버그 메뉴 접근
1. 앱 실행
2. 하단 탭에서 **Tab 05 (설정)** 선택
3. 상단에 "디버그 메뉴" 진입

### ⚙️ Step 2: 배속 설정

#### 방법 A: 슬라이더 사용
```
┌─────────────────────────────┐
│ 시간 배속 설정               │
│ 현재 배속: 60x               │
│                              │
│ [━━━━━━━●━━━━━━━━━━━━━━]    │
│  1x              60x   100x  │
└─────────────────────────────┘
```
- 슬라이더를 드래그하여 원하는 배속 선택 (1~100)
- 손을 떼는 순간 자동 저장 및 적용

#### 방법 B: 프리셋 버튼 사용
```
┌─────────┬─────────┬──────────┬──────────┐
│  1x    │  60x   │  1000x   │  10000x  │
└─────────┴─────────┴──────────┴──────────┘
```
- **1x**: 테스트 종료 후 복구용
- **60x**: 1시간에 2.5일 진행 (권장)
- **1000x**: 43분에 30일 달성 (극초고속) ⚡
- **10000x**: 4.3분에 30일 달성 (극한) 🚀

### 🚀 Step 3: 타이머 시작
1. **Tab 01 (시작)** 화면으로 이동
2. 목표 일수 설정 (예: 30일)
3. "시작하기" 버튼 클릭

### 📊 Step 4: 진행 확인

#### 확인 지점 1: Tab 01 (실행 화면)
```
┌──────────────────────┐
│   Day 2 / 30일        │  ← 1분 만에 2일 달성 (60배속)
│   [████░░░░░░░] 6.7%  │
│                       │
│   00:02:30 ⚡        │  ← 중앙 타이머도 빠르게 증가!
│   2.5일 경과          │  ← 실시간 업데이트
└──────────────────────┘
```

> **💡 중앙 타이머 동작**:
> - **60배속**: 실제 1초 경과 → 타이머는 00:01:00(1분) 증가
> - **100배속**: 실제 1초 경과 → 타이머는 00:01:40(1분 40초) 증가
> - **1000배속**: 실제 1초 경과 → 타이머는 00:16:40(16분 40초) 증가
> - **10000배속**: 실제 1초 경과 → 타이머는 02:46:40(2시간 46분 40초) 증가

#### 확인 지점 2: Tab 03 (레벨 화면)
```
┌──────────────────────┐
│   Level 3             │  ← 빠른 레벨업 확인
│   철의 의지            │
│                       │
│   총 경과: 7.5일      │
└──────────────────────┘
```

#### 확인 지점 3: Tab 02 (기록 화면)
```
┌──────────────────────┐
│   총 금주일: 2.5일     │  ← 통계 계산 확인
│   피한 칼로리: 1,250  │
│   안 마신 술: 2.5병   │
└──────────────────────┘
```

### 🔄 Step 5: 테스트 완료 후 복구
```
⚠️ 중요: 반드시 1배속으로 복구하세요!

1. 디버그 메뉴 재진입
2. "1x (정상)" 버튼 클릭
3. 토스트 메시지 확인: "정상 속도 (1x)"
```

---

## 배속별 테스트 시나리오

### 🧪 시나리오 1: 빠른 레벨업 테스트 (권장)
**목적**: 레벨 2~5 진행 확인  
**배속**: 60배속  
**소요 시간**: 약 3분

```
1. 60배속 설정
2. 타이머 시작 (30일 목표)
3. 대기:
   - 1분 경과 → Day 2 달성 (Level 2)
   - 2분 경과 → Day 5 달성 (Level 3)
   - 3분 경과 → Day 7 달성 (Level 4)
4. 1배속 복구
```

**확인 사항**:
- ✅ 레벨 아이콘 변경
- ✅ 레벨 이름 변경
- ✅ 진행률 바 애니메이션

---

### 🧪 시나리오 2: 30일 목표 완료 테스트
**목적**: 타이머 완료 로직 검증  
**배속**: 60배속  
**소요 시간**: 약 12시간

```
1. 60배속 설정
2. 타이머 시작 (30일 목표)
3. 12시간 대기 (밤새 실행)
4. 다음날 확인:
   - 타이머 완료 화면 표시
   - "종료" 버튼 활성화
   - 기록 저장 확인
5. 1배속 복구
```

**확인 사항**:
- ✅ 타이머 완료 알림
- ✅ 기록 저장 (Tab 02)
- ✅ 통계 정상 계산

---

### 🧪 시나리오 3: 초고속 진행 테스트
**목적**: 극한 상황 테스트  
**배속**: 100배속  
**소요 시간**: 약 7.2시간

```
1. 100배속 설정
2. 타이머 시작 (30일 목표)
3. 7.2시간 대기
4. 확인:
   - 30일 달성
   - 최고 레벨 도달
5. 1배속 복구
```

**확인 사항**:
- ✅ 100배속에서도 오류 없음
- ✅ UI 렌더링 정상
- ✅ 메모리 누수 없음

---

### 🧪 시나리오 4: 통계 계산 검증
**목적**: Tab 02 통계 정확성 확인  
**배속**: 10배속  
**소요 시간**: 약 1시간

```
1. 사용자 설정:
   - 음주 비용: 중가 (4만원)
   - 음주 빈도: 주 2.5회
2. 10배속 설정
3. 타이머 시작
4. 1시간 대기 (0.42일 경과)
5. Tab 02 확인:
   - 총 금주일: 0.42일
   - 피한 칼로리: 약 225 kcal
   - 안 마신 술: 0.15병
   - 절약한 돈: 약 2,400원
6. 1배속 복구
```

**확인 사항**:
- ✅ 칼로리 계산 정확성
- ✅ 금액 계산 정확성
- ✅ 소수점 처리 정상

---

## 주의사항

### ⚠️ 1. 반드시 1배속으로 복구
```
배속 상태에서 앱 종료 시:
→ 설정 값이 SharedPreferences에 영구 저장됨
→ 다음 실행 시에도 배속 적용됨
→ 실제 사용자 데이터 왜곡 가능

해결책: 테스트 완료 후 반드시 "1x (정상)" 버튼 클릭
```

### ⚠️ 2. 디버그 전용 기능
```
✅ 개발 환경: 자유롭게 사용
❌ 릴리스 빌드: UI 자동 숨김 (예정)
❌ 실제 사용자: 절대 노출 금지
```

### ⚠️ 3. 과거 기록과의 분리
```
과거 완료된 기록: 1배속으로 저장됨
현재 진행 중 타이머: 설정된 배속 적용됨

→ Tab 03 (레벨 화면)에서 총 경과 일수 계산 시 주의
→ 과거 기록 10일 + 현재 배속 5일 = 총 15일로 표시
```

### ⚠️ 4. 광고 쿨타임 독립
```
시간 배속 ≠ 광고 쿨타임 배속

시간 배속을 60배속으로 설정해도:
- 전면 광고 쿨타임: 실제 시간 기준 (예: 60초)
- 앱 오픈 광고 쿨타임: 실제 시간 기준

→ 광고 테스트는 별도로 "전면 광고 쿨타임" 디버그 설정 사용
```

---

## 실전 활용 예시

### 📱 예시 1: 점심시간 빠른 테스트 (30분)
```
목표: 레벨 4까지 진행 확인

1. 60배속 설정
2. 타이머 시작
3. 점심시간 30분 대기
   → 1.25일 경과 (약 30시간)
   → Level 2~3 도달
4. 레벨 UI 확인
5. 1배속 복구
```

### 📱 예시 2: 하루 종일 장기 테스트 (8시간)
```
목표: 15일 진행 확인

1. 60배속 설정
2. 아침에 타이머 시작
3. 8시간 근무 중 백그라운드 실행
   → 20일 경과
4. 퇴근 후 확인:
   - 레벨 진행
   - 통계 계산
   - 메모리/배터리 상태
5. 1배속 복구
```

### 📱 예시 3: 밤샘 완료 테스트 (12시간)
```
목표: 30일 완료 시나리오 검증

1. 취침 전:
   - 60배속 설정
   - 타이머 시작
   - 충전기 연결
2. 밤새 실행 (12시간)
   → 30일 달성
3. 다음날 아침 확인:
   - 타이머 완료 화면
   - 기록 저장 여부
   - 통계 정확성
4. 1배속 복구
```

---

## 트러블슈팅

### 문제 1: 슬라이더가 움직이지 않음
```
원인: UI 렌더링 지연
해결: 디버그 메뉴 재진입 또는 앱 재시작
```

### 문제 2: 배속 설정 후에도 일수가 느리게 증가
```
원인: 화면이 업데이트되지 않음
해결:
1. 다른 탭으로 이동했다가 복귀
2. 앱을 백그라운드로 보냈다가 복귀
3. 로그 확인: "getDayInMillis: factor=60x"
```

### 문제 3: 1배속 복구 후에도 빠르게 진행
```
원인: SharedPreferences 캐시 문제
해결:
1. 디버그 메뉴에서 슬라이더를 1로 수동 이동
2. 설정 저장 확인 (토스트 메시지)
3. 앱 재시작
```

### 문제 4: 통계 계산이 이상함
```
원인: 과거 기록 + 현재 타이머 혼합 계산
확인:
1. Tab 02 → "전체" 필터 선택
2. 총 금주일 확인
3. 예상 값과 비교

예상 값 계산:
- 과거 기록 1개 (10일) + 현재 60배속 1시간(2.5일) = 12.5일
```

---

## 로그 확인 방법

### Logcat 필터링
```bash
# Windows PowerShell
adb -s emulator-5554 logcat | findstr "getDayInMillis"

# 예상 출력:
Constants: getDayInMillis: factor=60x, result=1440000ms
Constants: getDayInMillis: factor=1x, result=86400000ms
```

### 주요 로그 태그
- `Constants`: 배속 설정 및 계산
- `RunScreen`: 타이머 진행 상태
- `Tab03ViewModel`: 레벨 계산
- `RecordsScreen`: 통계 계산

---

## 요약 (Quick Reference)

| 배속 | 1시간 경과 시 | 30일 달성 시간 | 추천 용도 |
|------|-------------|--------------|----------|
| **1x** | 0.04일 | 30일 | 실제 운영 |
| **10x** | 0.42일 | 3일 | 중기 테스트 |
| **60x** | 2.5일 | 12시간 | 단기 테스트 (권장) |
| **100x** | 4.17일 | 7.2시간 | 극한 테스트 |
| **1000x** | 41.67일 | 43.2분 | 초극한 테스트 ⚡ |
| **10000x** | 416.67일 | 4.32분 | 극한 중의 극한 🚀 |

**권장 배속**: 60배속  
**최단 테스트**: 10000배속 (4.3분에 30일 달성)  
**복구 필수**: 반드시 1배속으로 복구 후 종료

---

**작성**: GitHub Copilot  
**문의**: 개발팀

