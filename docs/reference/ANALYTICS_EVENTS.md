# AlcoholicTimer 앱 핵심 이벤트 분석 설계

## 1. 개요

본 문서는 AlcoholicTimer 앱의 핵심 사용자 행동과 광고 수익 최적화를 위해 Firebase Analytics로 추적할 이벤트를 정의합니다.

## 2. 앱 핵심 기능 및 수익 모델

- **핵심 기능:**
    - 금주 타이머 실행 및 경과 시간/절약 금액/달성 레벨 확인
    - 과거 금주 기록 조회 및 관리
- **주 수익 모델:**
    - **앱 오프닝 광고 (주 수익원):** 앱 실행 시점에 노출됩니다.
    - **전면 광고:** 특정 조건 하에 제한적으로 노출됩니다.

## 3. 핵심 분석 이벤트 설계

### 3.1. 광고 수익 최적화 이벤트

광고 요청, 노출, 클릭 및 예상 수익을 추적하여 광고 성과를 분석하고 최적화합니다.

| 이벤트명                  | 파라미터                 | 설명                                                                                             |
| ------------------------- | ------------------------ | ------------------------------------------------------------------------------------------------ | 
| `ad_request`              | `ad_type` (String)       | 광고(앱 오프닝, 전면, 배너)를 요청할 때 기록합니다. (e.g., `app_open`, `interstitial`, `banner`)      |
| `ad_impression`           | `ad_type` (String)       | 광고가 사용자에게 성공적으로 노출될 때 기록합니다.                                             |
| `ad_click`                | `ad_type` (String)       | 사용자가 광고를 클릭할 때 기록합니다.                                                          |
| `ad_revenue`              | `ad_type`, `value`, `currency` | 광고에서 발생한 예상 수익을 기록합니다.                                                      |

### 3.2. 사용자 참여 및 핵심 기능 사용률 추적 이벤트

사용자의 핵심 기능 사용 패턴을 분석하여 이탈 지점을 파악하고, 사용자 경험을 개선하여 앱 재방문을 유도합니다.

| 이벤트명                  | 파라미터                 | 설명                                                                                             |
| ------------------------- | ------------------------ | ------------------------------------------------------------------------------------------------ |
| `start_timer`             | `target_days` (Int)      | 사용자가 금주 타이머를 시작할 때 기록합니다. 목표 기간을 파라미터로 전달하여 사용자 목표 설정 패턴을 분석합니다. |
| `stop_timer`              | `elapsed_days` (Int)     | 사용자가 금주 타이머를 중지할 때 기록합니다. 실제 금주 기간을 파악하여 사용자 이탈 시점을 분석합니다. |
| `complete_timer`          | `target_days` (Int)      | 사용자가 목표 기간을 달성했을 때 기록합니다.                                                    |
| `view_records`            | -                        | 사용자가 과거 금주 기록 목록을 조회할 때 기록합니다.                                             |
| `view_record_detail`      | `record_id` (String)     | 사용자가 특정 금주 기록의 상세 내용을 조회할 때 기록합니다.                                    |
| `delete_records`          | `delete_count` (Int)     | 사용자가 금주 기록을 삭제할 때 기록합니다. 삭제된 기록 수를 파라미터로 전달합니다.             |

### 3.3. 사용자 설정 및 상호작용 이벤트

사용자의 설정 변경 및 부가 기능 사용 현황을 파악하여, 사용자가 어떤 기능에 관심이 있는지 분석합니다.

| 이벤트명                  | 파라미터                 | 설명                                                                                             |
| ------------------------- | ------------------------ | ------------------------------------------------------------------------------------------------ |
| `change_indicator`        | `indicator_type` (String)| 메인 화면에서 표시되는 정보(경과일, 절약 금액 등)를 전환할 때 기록합니다. (e.g., `days`, `money`)    |
| `change_settings`         | `setting_type` (String)  | 사용자가 앱 설정을 변경할 때 기록합니다. (e.g., `currency`, `drinking_habit`)                   |

## 4. 이벤트 구현 가이드

- 위에서 설계한 이벤트를 Firebase Analytics SDK를 사용하여 앱 코드에 구현합니다.
- `AdManager`, `AppOpenAdManager`, `InterstitialAdManager`, `RunActivity`, `AllRecords.kt` 등 관련 파일에 이벤트 로깅 코드를 추가해야 합니다.
- `ad_revenue` 이벤트는 AdMob의 `PaidEventListener`를 사용하여 구현할 수 있습니다.
