# ë¦´ë¦¬ì¦ˆ ë¹Œë“œ ê´‘ê³  ì•ˆì „ì¥ì¹˜ êµ¬í˜„ ì™„ë£Œ

**ë‚ ì§œ:** 2025-11-04  
**ëª©ì :** ë¦´ë¦¬ì¦ˆ ë¹Œë“œì—ì„œ ë””ë²„ê·¸ ê¸°ëŠ¥(ê´‘ê³  ìˆ¨ê¸°ê¸°)ì´ ì‹¤ìˆ˜ë¡œ í™œì„±í™”ë˜ëŠ” ê²ƒì„ ë°©ì§€

---

## âœ… êµ¬í˜„ëœ ì•ˆì „ì¥ì¹˜

### 1. ìë™ Gradle ê²€ì¦ íƒœìŠ¤í¬ â­ï¸â­ï¸â­ï¸

**íŒŒì¼:** `app/build.gradle.kts`

**íƒœìŠ¤í¬:** `verifyReleaseAdConfig`

**ì‘ë™ ë°©ì‹:**
- ëª¨ë“  ë¦´ë¦¬ì¦ˆ ë¹Œë“œ ëª…ë ¹ ì‹¤í–‰ ì‹œ **ìë™ìœ¼ë¡œ ì‹¤í–‰**
- `assembleRelease`, `bundleRelease` ë“±ì— ì˜ì¡´ì„± ì¶”ê°€ë¨
- ê²€ì¦ ì‹¤íŒ¨ ì‹œ **ë¹Œë“œ ìë™ ì¤‘ë‹¨**

**ê²€ì¦ í•­ëª©:**
- âœ… `DebugAdHelper.kt`ì— `BuildConfig.DEBUG` ì²´í¬ ì¡´ì¬
- âœ… `BaseActivity.kt`ì— `BuildConfig.DEBUG` ì²´í¬ ì¡´ì¬
- âœ… `StandardScreen.kt`ì— `BuildConfig.DEBUG` ì²´í¬ ì¡´ì¬
- âœ… `DetailActivity.kt`ì— `BuildConfig.DEBUG` ì²´í¬ ì¡´ì¬
- âœ… ë¦´ë¦¬ì¦ˆ ê´‘ê³  ìœ ë‹› ID ì„¤ì • í™•ì¸

**ì‹¤í–‰ ë°©ë²•:**
```bash
# ìˆ˜ë™ ì‹¤í–‰
./gradlew verifyReleaseAdConfig

# ìë™ ì‹¤í–‰ (ë¦´ë¦¬ì¦ˆ ë¹Œë“œ ì‹œ)
./gradlew assembleRelease  # â† ìë™ìœ¼ë¡œ verifyReleaseAdConfig ì‹¤í–‰ë¨
./gradlew bundleRelease    # â† ìë™ìœ¼ë¡œ verifyReleaseAdConfig ì‹¤í–‰ë¨
```

**ì‹¤í–‰ ê²°ê³¼:**
```
================================================================================
ğŸ” ë¦´ë¦¬ì¦ˆ ë¹Œë“œ ê´‘ê³  ì„¤ì • ê²€ì¦ ì¤‘...
================================================================================

âœ… í†µê³¼í•œ ê²€ì¦:
  âœ“ DebugAdHelper.ktì— BuildConfig.DEBUG ì²´í¬ ì¡´ì¬
  âœ“ BaseActivity.ktì— BuildConfig.DEBUG ì²´í¬ ì¡´ì¬
  âœ“ StandardScreen.ktì— BuildConfig.DEBUG ì²´í¬ ì¡´ì¬
  âœ“ DetailActivity.ktì— BuildConfig.DEBUG ì²´í¬ ì¡´ì¬
  âœ“ ë¦´ë¦¬ì¦ˆ BANNER ê´‘ê³  ìœ ë‹› ID ì„¤ì •ë¨
  âœ“ ë¦´ë¦¬ì¦ˆ INTERSTITIAL ê´‘ê³  ìœ ë‹› ID ì„¤ì •ë¨
  âœ“ ë¦´ë¦¬ì¦ˆ APP_OPEN ê´‘ê³  ìœ ë‹› ID ì„¤ì •ë¨

================================================================================
âœ… ëª¨ë“  ê²€ì¦ í†µê³¼! ë¦´ë¦¬ì¦ˆ ë¹Œë“œë¥¼ ê³„ì† ì§„í–‰í•©ë‹ˆë‹¤.
================================================================================
```

---

### 2. ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸ â­ï¸â­ï¸

**íŒŒì¼:** `build_release.ps1`

**ì‘ë™ ë°©ì‹:**
- ë¦´ë¦¬ì¦ˆ ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì‹œ ìˆ˜ë™ ì²´í¬ë¦¬ìŠ¤íŠ¸ í‘œì‹œ
- ì‚¬ìš©ìê°€ `Y`ë¥¼ ì…ë ¥í•´ì•¼ë§Œ ë¹Œë“œ ì§„í–‰

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
1. VersionCodeì™€ VersionName ì—…ë°ì´íŠ¸ í™•ì¸
2. CHANGELOG.md ì—…ë°ì´íŠ¸ í™•ì¸
3. **ë””ë²„ê·¸ ê¸°ëŠ¥ ë¹„í™œì„±í™” í™•ì¸** â† ê´‘ê³  ê´€ë ¨
4. ê´‘ê³  ìœ ë‹› ID í™•ì¸
5. ë¡œê·¸/ë””ë²„ê·¸ ë©”ì‹œì§€ ì œê±° í™•ì¸

**ì‚¬ìš© ë°©ë²•:**
```powershell
.\build_release.ps1
```

---

### 3. Unit Test ê²€ì¦ â­ï¸

**íŒŒì¼:** `app/src/test/java/kr/sweetapps/alcoholictimer/ReleaseAdConfigTest.kt`

**í…ŒìŠ¤íŠ¸ ë‚´ìš©:**
- `BuildConfig.DEBUG`ê°€ ë¦´ë¦¬ì¦ˆì—ì„œ falseì¸ì§€ í™•ì¸
- ê´‘ê³  ìœ ë‹› IDê°€ í…ŒìŠ¤íŠ¸ IDê°€ ì•„ë‹Œì§€ í™•ì¸
- ëª¨ë“  ê´‘ê³  íƒ€ì…ì˜ IDê°€ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸

**ì‹¤í–‰ ë°©ë²•:**
```bash
# ë””ë²„ê·¸ í…ŒìŠ¤íŠ¸
./gradlew testDebugUnitTest

# ë¦´ë¦¬ì¦ˆ í…ŒìŠ¤íŠ¸ (ê°€ëŠ¥í•œ ê²½ìš°)
./gradlew testReleaseUnitTest
```

---

### 4. ë¬¸ì„œí™” â­ï¸

**íŒŒì¼:** `docs/RELEASE_AD_VERIFICATION_GUIDE.md`

**ë‚´ìš©:**
- ê²€ì¦ ì‹œìŠ¤í…œ ì‚¬ìš© ê°€ì´ë“œ
- ì¼ë°˜ì ì¸ ì‹¤ìˆ˜ ì˜ˆì‹œ
- ë¬¸ì œ í•´ê²° ë°©ë²•
- CI/CD í†µí•© ë°©ë²•

---

## ğŸ›¡ï¸ ë‹¤ì¸µ ë°©ì–´ ì „ëµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. ê°œë°œì ì½”ë“œ ì‘ì„±                         â”‚
â”‚     (BuildConfig.DEBUG ì²´í¬ ì¶”ê°€)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. Unit Test                               â”‚
â”‚     (ReleaseAdConfigTest.kt)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. Gradle ìë™ ê²€ì¦                         â”‚
â”‚     (verifyReleaseAdConfig)                 â”‚
â”‚     â† ë¦´ë¦¬ì¦ˆ ë¹Œë“œ ì‹œ ìë™ ì‹¤í–‰ â­ï¸           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸                 â”‚
â”‚     (build_release.ps1)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. ë¦´ë¦¬ì¦ˆ ë¹Œë“œ ì™„ë£Œ                         â”‚
â”‚     âœ… ê´‘ê³  ì •ìƒ ì‘ë™ ë³´ì¥                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ ë¦´ë¦¬ì¦ˆ ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸

ë¹ ë¥¸ ì²´í¬ë¥¼ ìœ„í•´ ë‹¤ìŒ ëª…ë ¹ì–´ë“¤ì„ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•˜ì„¸ìš”:

```bash
# 1. ê´‘ê³  ì„¤ì • ê²€ì¦
./gradlew verifyReleaseAdConfig

# 2. Unit Test ì‹¤í–‰
./gradlew testDebugUnitTest

# 3. ë¦´ë¦¬ì¦ˆ ë¹Œë“œ (ìë™ìœ¼ë¡œ ê²€ì¦ í¬í•¨)
.\build_release.ps1
```

---

## ğŸ¯ í•µì‹¬ ë³´í˜¸ ë©”ì»¤ë‹ˆì¦˜

### Before (ë¬¸ì œ ì½”ë“œ)
```kotlin
// âŒ ë¦´ë¦¬ì¦ˆì—ì„œë„ ê´‘ê³ ê°€ ìˆ¨ê²¨ì§ˆ ìˆ˜ ìˆìŒ
var shouldHideBanner by remember { 
    mutableStateOf(DebugAdHelper.bannerHiddenFlow.value) 
}
```

### After (ì•ˆì „í•œ ì½”ë“œ)
```kotlin
// âœ… ë¦´ë¦¬ì¦ˆì—ì„œëŠ” í•­ìƒ false
var shouldHideBanner by remember { 
    mutableStateOf(
        if (BuildConfig.DEBUG) DebugAdHelper.bannerHiddenFlow.value else false
    ) 
}

// âœ… Flow êµ¬ë…ë„ ë””ë²„ê·¸ì—ì„œë§Œ
if (BuildConfig.DEBUG) {
    LaunchedEffect(Unit) { ... }
}
```

---

## ğŸš¨ ì‹¤íŒ¨ ì‹œë‚˜ë¦¬ì˜¤

ë§Œì•½ `BuildConfig.DEBUG` ì²´í¬ë¥¼ ë¹¼ë¨¹ê³  ë¦´ë¦¬ì¦ˆ ë¹Œë“œë¥¼ ì‹œë„í•˜ë©´:

```
âŒ ERROR: BaseActivity.ktì˜ shouldHideBanner ë¡œì§ì— BuildConfig.DEBUG ì²´í¬ê°€ ì—†ìŠµë‹ˆë‹¤!

FAILURE: Build failed with an exception.

* What went wrong:
ë¦´ë¦¬ì¦ˆ ë¹Œë“œ ê´‘ê³  ì„¤ì • ê²€ì¦ ì‹¤íŒ¨!

DebugAdHelperê°€ ë¦´ë¦¬ì¦ˆ ë¹Œë“œì—ì„œë„ ê´‘ê³ ë¥¼ ìˆ¨ê¸¸ ìˆ˜ ìˆëŠ” ìƒíƒœì…ë‹ˆë‹¤.
ë‹¤ìŒ íŒŒì¼ë“¤ì„ í™•ì¸í•˜ê³  BuildConfig.DEBUG ì²´í¬ë¥¼ ì¶”ê°€í•˜ì„¸ìš”:
  - BaseActivity.kt
  - StandardScreen.kt
  - DetailActivity.kt
```

â†’ **ë¹Œë“œê°€ ìë™ìœ¼ë¡œ ì¤‘ë‹¨ë˜ì–´ ì˜ëª»ëœ ë¦´ë¦¬ì¦ˆë¥¼ ë°©ì§€í•©ë‹ˆë‹¤!**

---

## ğŸ“Š í…ŒìŠ¤íŠ¸ ê²°ê³¼

### ê²€ì¦ íƒœìŠ¤í¬ ì‹¤í–‰ ì„±ê³µ
```bash
$ ./gradlew verifyReleaseAdConfig

> Task :app:verifyReleaseAdConfig

================================================================================
ğŸ” ë¦´ë¦¬ì¦ˆ ë¹Œë“œ ê´‘ê³  ì„¤ì • ê²€ì¦ ì¤‘...
================================================================================

âœ… í†µê³¼í•œ ê²€ì¦:
  âœ“ DebugAdHelper.ktì— BuildConfig.DEBUG ì²´í¬ ì¡´ì¬
  âœ“ BaseActivity.ktì— BuildConfig.DEBUG ì²´í¬ ì¡´ì¬
  âœ“ StandardScreen.ktì— BuildConfig.DEBUG ì²´í¬ ì¡´ì¬
  âœ“ DetailActivity.ktì— BuildConfig.DEBUG ì²´í¬ ì¡´ì¬
  âœ“ ë¦´ë¦¬ì¦ˆ BANNER ê´‘ê³  ìœ ë‹› ID ì„¤ì •ë¨
  âœ“ ë¦´ë¦¬ì¦ˆ INTERSTITIAL ê´‘ê³  ìœ ë‹› ID ì„¤ì •ë¨
  âœ“ ë¦´ë¦¬ì¦ˆ APP_OPEN ê´‘ê³  ìœ ë‹› ID ì„¤ì •ë¨

================================================================================
âœ… ëª¨ë“  ê²€ì¦ í†µê³¼! ë¦´ë¦¬ì¦ˆ ë¹Œë“œë¥¼ ê³„ì† ì§„í–‰í•©ë‹ˆë‹¤.
================================================================================

BUILD SUCCESSFUL in 3s
```

---

## ğŸ’¡ ì¶”ê°€ ë³´ì•ˆ ê¶Œì¥ì‚¬í•­

### CI/CD í†µí•©
```yaml
# .github/workflows/release.yml
- name: Verify Release Ad Configuration
  run: ./gradlew verifyReleaseAdConfig

- name: Run Tests
  run: ./gradlew testDebugUnitTest

- name: Build Release
  run: ./gradlew bundleRelease
```

### Pre-commit Hook
ë¦´ë¦¬ì¦ˆ ë¸Œëœì¹˜ì— ì»¤ë°‹í•  ë•Œ ìë™ ê²€ì¦:
```bash
# .git/hooks/pre-commit
#!/bin/sh
if [ "$(git branch --show-current)" = "release" ]; then
  ./gradlew verifyReleaseAdConfig
fi
```

---

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ

- `docs/RELEASE_AD_VERIFICATION_GUIDE.md` - ìƒì„¸ ê²€ì¦ ê°€ì´ë“œ
- `docs/a_AD_POLICY_COMPLIANCE_REVIEW.md` - ê´‘ê³  ì •ì±… ê²€í† 
- `docs/a_PRODUCTION_RELEASE_VALIDATION.md` - í”„ë¡œë•ì…˜ ë¦´ë¦¬ì¦ˆ ê²€ì¦

---

## âœ… ì™„ë£Œ í•­ëª©

- [x] `DebugAdHelper` ë¦´ë¦¬ì¦ˆ ë³´í˜¸ ì½”ë“œ ì¶”ê°€
- [x] `BaseActivity.kt` BuildConfig.DEBUG ì²´í¬ ì¶”ê°€
- [x] `StandardScreen.kt` BuildConfig.DEBUG ì²´í¬ ì¶”ê°€
- [x] `DetailActivity.kt` BuildConfig.DEBUG ì²´í¬ ì¶”ê°€
- [x] Gradle ìë™ ê²€ì¦ íƒœìŠ¤í¬ êµ¬í˜„
- [x] ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸ ì¶”ê°€
- [x] Unit Test ì‘ì„±
- [x] ë¬¸ì„œí™” ì™„ë£Œ
- [x] ê²€ì¦ íƒœìŠ¤í¬ í…ŒìŠ¤íŠ¸ ì„±ê³µ

---

**ê²°ë¡ :** ì´ì œ ë¦´ë¦¬ì¦ˆ ë¹Œë“œì—ì„œ ì‹¤ìˆ˜ë¡œ ê´‘ê³ ê°€ ë¹„í™œì„±í™”ë˜ëŠ” ì¼ì€ **ì ˆëŒ€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤**! ğŸ‰

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸:** 2025-11-04

