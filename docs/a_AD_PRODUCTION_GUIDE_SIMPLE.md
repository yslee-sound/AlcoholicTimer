# 광고 안전 가이드 - 간단 요약

**작성일**: 2025-10-27

---

## ✅ 결론: 프로덕션에서도 본인 기기를 테스트 기기로 등록하세요!

### 현재 설정 (권장)

```kotlin
// MainApplication.kt - 릴리즈 빌드
listOf("79DB2DA46501DFD953D9222E13384F99")  // 본인 기기 등록
```

### 왜 안전한가?

1. **본인만 테스트 광고를 봄** → 다른 모든 사용자는 진짜 광고를 봄
2. **실수 클릭 방지** → 본인이 광고 클릭해도 계정 정지 위험 없음
3. **수익 영향 미미** → 본인 1명의 수익만 없어짐 (전체의 0.001% 미만)
4. **Google 공식 권장** → AdMob 정책에서 개발자는 테스트 기기로 등록하라고 명시

---

## ❌ 오해하기 쉬운 부분

### 잘못된 생각
```
"프로덕션에서는 모든 사용자가 진짜 광고를 봐야 수익이 최대화된다"
"본인 기기를 테스트 기기로 등록하면 수익이 줄어든다"
```

### 진실
```
✅ 본인 1명의 광고 수익 ≈ $0.001/일 (무시할 수준)
✅ 전체 수익에 미치는 영향 ≈ 0.001% 미만
❌ 본인이 실수로 광고 클릭 시 계정 영구 정지 → 모든 수익 몰수!

결론: 본인 기기는 반드시 테스트 기기로 등록!
```

---

## 📋 상황별 설정

### 상황 1: 본인만 앱 사용

```kotlin
// 릴리즈 빌드
listOf("79DB2DA46501DFD953D9222E13384F99")
```

### 상황 2: 가족도 앱 사용

```kotlin
// 릴리즈 빌드
listOf(
    "79DB2DA46501DFD953D9222E13384F99",  // 본인 폰
    "ABC123DEF456",                       // 배우자 폰
    "XYZ789GHI012"                        // 자녀 폰
)
```

**이유**: 가족이 실수로 광고 클릭하면 본인 계정이 정지됨!

---

## 🚨 절대 하지 말아야 할 것

```
❌ 본인 기기를 테스트 기기로 등록하지 않고 앱 사용
❌ 본인 광고 클릭
❌ 가족/친구에게 광고 클릭 부탁
❌ VPN 사용해서 클릭
```

**결과**: AdMob 계정 영구 정지 → 수익 전액 몰수 → 재가입 불가능

---

## 💡 최종 답변

### 질문: "프로덕션에서 본인 기기를 테스트 기기로 등록해도 되나요?"

**답변: 네! 오히려 반드시 등록해야 합니다!**

- ✅ Google 공식 권장 방법
- ✅ 계정 안전 보장
- ✅ 수익 영향 거의 없음 (0.001% 미만)
- ✅ 앱을 안전하게 사용 가능

### 질문: "수익이 줄어들지 않나요?"

**답변: 거의 없습니다!**

```
예상 영향:
- 본인 1명의 광고 수익: ~$0.001/일
- 전체 수익 (사용자 1,000명): ~$10/일
- 영향: 0.01% (무시할 수준)

위험:
- 본인 광고 클릭 시 계정 정지 → 모든 수익 몰수
- 위험 vs 수익: 절대 안 맞음!
```

---

## 📚 더 자세한 내용

- [상세 가이드: a_INTERNAL_TEST_AD_GUIDE.md](./a_INTERNAL_TEST_AD_GUIDE.md)
- [광고 클릭 경고: a_AD_SELF_CLICK_WARNING.md](./a_AD_SELF_CLICK_WARNING.md)

---

**결론**: 프로덕션에서도 본인 기기는 테스트 기기로 등록하세요! 안전하고, Google이 권장하며, 수익 영향도 거의 없습니다! ✅

---

## 🆘 문제 해결: 테스트 기기로 등록했는데도 진짜 광고가 나옴

### 증상
```
MainApplication.kt에 본인 기기 ID를 등록했는데
플레이스토어에서 다운받은 앱에서 진짜 광고가 나옴
```

### 원인 및 해결 방법

#### 1️⃣ **기기 ID가 잘못됨** (가장 흔한 원인)

**문제**:
- 현재 등록된 ID: `79DB2DA46501DFD953D9222E13384F99`
- 실제 본인 기기의 ID가 다를 수 있음

**해결**:
1. **정확한 기기 ID 확인** → [상세 가이드](./a_HOW_TO_GET_DEVICE_ID.md)

2. **빠른 확인 방법**:
   ```
   1. 폰과 PC를 USB로 연결
   2. Android Studio > Logcat 열기
   3. 앱 실행
   4. Logcat 검색: "test device"
   5. 표시되는 ID 확인!
   ```

3. **MainApplication.kt 수정**:
   ```kotlin
   listOf("확인한_실제_ID")  // 릴리즈 빌드
   ```

4. **빌드 후 플레이스토어 업로드**

---

#### 2️⃣ **새 버전이 아직 배포되지 않음**

**문제**:
- 코드를 수정했지만 아직 플레이스토어에 업로드하지 않음
- 또는 업로드했지만 승인/배포 대기 중

**해결**:
1. **빌드 실행**:
   ```cmd
   .\gradlew.bat bundleRelease
   ```

2. **플레이스토어 콘솔에서 업로드**:
   - `app/build/outputs/bundle/release/app-release.aab` 업로드

3. **검토 대기** (보통 1-2일)

4. **업데이트 확인**:
   - 플레이스토어 > 앱 > "업데이트" 클릭
   - 최신 버전 확인

---

#### 3️⃣ **캐시 문제**

**문제**:
- 업데이트했지만 이전 버전의 광고 설정이 캐시됨

**해결**:
1. **앱 완전히 삭제**:
   - 설정 > 앱 > AlcoholicTimer > 삭제

2. **플레이스토어에서 재설치**

3. **앱 실행 후 확인**

---

#### 4️⃣ **BuildConfig.DEBUG가 true로 인식됨**

**문제**:
- 플레이스토어 버전인데도 디버그로 인식되어 잘못된 설정 사용

**확인**:
```kotlin
// MainApplication.kt에 임시 로그 추가
android.util.Log.e("AD_DEBUG", "Is Debug: ${BuildConfig.DEBUG}")
android.util.Log.e("AD_DEBUG", "Test Device IDs: $testDeviceIds")
```

**해결**:
- 릴리즈 빌드 확인: `.\gradlew.bat bundleRelease`
- 디버그 심볼 제거 확인

---

### ✅ 테스트 광고 확인 방법

테스트 기기로 제대로 등록되었는지 확인:

#### 시각적 확인:
```
✅ 광고 상단에 "Test Ad" 표시
✅ 광고 하단에 "Google 테스트 광고" 워터마크
```

#### 동작 확인:
```
✅ 광고 클릭 시 "테스트 광고입니다" 메시지
✅ 또는 클릭해도 아무 일도 일어나지 않음
```

#### Logcat 확인:
```
✅ "Test mode" 메시지
✅ "This is a test ad" 메시지
```

---

### 🎯 체크리스트

테스트 기기 등록이 제대로 되었는지 확인:

#### 코드 체크:
- [ ] MainApplication.kt에 본인 기기 ID 등록 확인
- [ ] `else` 블록 (릴리즈 빌드)에 등록되어 있는지 확인
- [ ] 기기 ID가 32자리 16진수인지 확인

#### 배포 체크:
- [ ] 릴리즈 빌드 실행 완료
- [ ] 플레이스토어에 업로드 완료
- [ ] 검토 승인 완료
- [ ] 본인 폰에서 업데이트 설치 완료

#### 확인 체크:
- [ ] 앱을 삭제 후 재설치함
- [ ] 광고가 "Test Ad"로 표시됨
- [ ] 광고 클릭해도 안전함

---

### 💡 가장 확실한 방법

**지금 당장 확인하려면**:

```
1. 폰과 PC를 USB로 연결
2. Android Studio 실행
3. Logcat 탭 열기
4. 플레이스토어 앱 실행
5. Logcat에서 "test device" 검색
6. 다음과 같은 메시지가 나오는지 확인:
   "Use RequestConfiguration.Builder()
    .setTestDeviceIds(Arrays.asList("YOUR_ID_HERE"))"
7. YOUR_ID_HERE가 본인 기기의 실제 ID입니다!
8. MainApplication.kt에 복사하여 붙여넣기
9. 빌드 후 플레이스토어 업로드
```

**상세 가이드**: [a_HOW_TO_GET_DEVICE_ID.md](./a_HOW_TO_GET_DEVICE_ID.md)

