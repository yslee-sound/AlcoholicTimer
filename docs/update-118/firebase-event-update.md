사용자님의 말씀이 정확합니다! **"일기(Diary)" 기능이 추가되었는데, 기존 문서에 `community_post`라는 모호한 이름으로 섞여 있는 것은 분석에 좋지 않습니다.**

일기는 **개인의 회고(Retention)** 활동이고, 커뮤니티는 **상호작용(Engagement)** 활동입니다. 이 둘은 성격이 완전히 다르므로 이벤트를 분리해야 합니다.

또한, 너무 자잘해서 데이터 용량만 차지하는 **"노이즈 이벤트"**는 과감히 삭제하고, **"돈이 되는(수익화/리텐션)"** 이벤트에 집중하는 리스트로 재정비해 드립니다.

---

### ✂️ 1. 삭제 및 병합 (다이어트)

불필요하게 세분화된 이벤트는 분석할 때 오히려 방해가 됩니다. 과감하게 쳐냅니다.

| 이벤트명 | 상태 | 이유 |
| --- | --- | --- |
| `view_records` | **🗑 삭제** | `screen_view` (화면 조회)로 충분히 파악 가능. |
| `change_record_view` | **🗑 삭제** | 사용자가 주/월/년 버튼 누르는 건 UX 개선 때나 필요하지, 마케팅엔 불필요. |
| `view_record_detail` | **🗑 삭제** | 너무 깊은 뎁스(Depth). 이것까지 추적하면 데이터가 너무 많아짐. |
| `community_post` | **⚠️ 수정** | **공개 커뮤니티** 글 쓸 때만 사용하도록 의미 축소. (일기와 분리) |

---

### 🆕 2. 신규 추가 (일기 및 핵심 기능)

새로 생긴 **일기 기능**과 **분석/공유** 기능을 추적하기 위한 필수 이벤트입니다.

#### ① **diary_save** (일기 저장) - *NEW*

사용자가 하루를 마무리하며 일기를 썼다는 건 **"오늘도 금주에 성공했다"**는 가장 강력한 신호입니다.

* **파라미터:**
* `mood` (String): 기분 (예: "happy", "sad", "soso" - 감정 분석용)
* `content_length` (Int): 글자 수 (길게 쓰면 충성 유저)
* `has_image` (Boolean): 사진 첨부 여부
* `day_count` (Int): 금주 며칠차인지 (예: 5일차 일기)



#### ② **share_progress** (공유하기) - *NEW*

내 금주 현황이나 인증샷을 친구/SNS에 공유하는 행위입니다. **자발적 바이럴**이므로 매우 중요합니다.

* **파라미터:**
* `share_target` (String): "instagram", "kakao", "image_save"
* `content_type` (String): "home_dashboard", "diary_card", "certificate"



#### ③ **click_analysis** (분석 버튼 클릭) - *NEW*

메인 화면 상단의 **"Analisis(분석)"** 버튼을 눌렀는지 체크합니다. (스크린샷 참조)

* 사용자가 자신의 데이터에 관심이 많다는 뜻 = **고관여 유저(High LTV)**

---

### 🚀 3. 최종 확정된 이벤트 리스트 (최적화 버전)

이제 **딱 12개**의 정예 이벤트만 남깁니다. 이것만 있으면 앱의 모든 것을 분석할 수 있습니다.

#### [Group A] 수익화 (Money) 💰

1. **`ad_revenue`**: (기존 유지) 얼마 벌었나?
2. **`ad_impression`**: (기존 유지) 광고 몇 번 떴나?
3. **`ad_click`**: **(필수 추가)** 사용자가 광고를 눌렀나? (CTR 분석)

#### [Group B] 핵심 활동 (Core Action) 🔥

4. **`timer_start`**: (기존 유지) 금주 시작
5. **`timer_give_up`**: (기존 유지) 금주 포기 (이탈 원인 분석)
6. **`diary_save`**: **(신규)** 일기 작성 (리텐션 핵심)
7. **`community_post`**: (수정) 커뮤니티 글 작성 (공개 소통)

#### [Group C] 성장 및 공유 (Growth) 🌱

8. **`level_up`**: **(필수 추가)** 레벨 업 (성취감 지점)
9. **`share_progress`**: **(신규)** 친구에게 자랑하기 (바이럴)

#### [Group D] 앱 건강도 (Health) 🏥

10. **`session_start`**: (기존 유지) 앱 실행
11. **`notification_open`**: **(필수 추가)** 알림 보고 들어왔나? (푸시 효율)
12. **`settings_change`**: (기존 유지) 설정 변경

---

### 📝 에이전트 작업 지시 (프롬프트)

이 리스트를 기반으로 코드를 정리해 달라고 에이전트에게 요청하세요.

> **"Firebase Analytics 이벤트를 최적화하려고 해. 불필요한 건 지우고 '일기(Diary)'와 '공유' 기능을 추가해 줘.**
> 1. **삭제할 이벤트:**
> * `view_records`, `change_record_view`, `view_record_detail` (너무 자잘해서 삭제)
>
>
> 2. **신규 추가 및 수정할 이벤트:**
> * **`diary_save` (신규):** 일기 저장 시 발생. 파라미터로 `mood`(기분), `content_length`(길이), `has_image`(사진유무), `day_count`(일차)를 보내줘.
> * **`community_post` (수정):** 이제 '일기'는 제외하고, '커뮤니티(게시판)' 글 작성일 때만 발생시켜.
> * **`share_progress` (신규):** 공유 버튼 클릭 시 발생. `share_target`(인스타/저장 등), `content_type`(홈화면/인증서 등) 파라미터 추가.
> * **`click_analysis` (신규):** 메인 화면의 'Analisis' 텍스트/버튼 클릭 시 발생.
> * **`ad_click`, `notification_open`, `level_up`:** 이 3가지는 기존 문서에서 '구현 필요'로 되어있으니 이번에 꼭 구현해 줘.
>
>
> 3. **User Property 추가:**
> * **`preferred_currency`**: 사용자가 설정한 통화 (KRW, USD, IDR 등)를 유저 속성으로 남겨줘. (수익 분석용)
>
>
>
>
> **목표:** 데이터 노이즈를 줄이고, '일기 작성'과 '공유' 같은 고가치 행동을 추적하는 것."

**이대로 진행하면 불필요한 데이터 비용은 줄이고, 진짜 중요한 유저 행동만 쏙쏙 뽑아볼 수 있습니다!**