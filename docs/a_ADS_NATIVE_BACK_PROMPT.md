# [Deprecated] Back-Press Native Ad Popup(뒤로가기 네이티브 광고 팝업) — 폐기 및 대체 가이드

## 📋 문서 상태

- 문서 버전: v2.0.0  
- 최종 수정일: 2025-10-26  
- 대상 플랫폼: Android (Kotlin + Compose)  
- 적용 앱: AlcoholicTimer  
- 상태: 폐기(Deprecated) — 더 이상 이 패턴을 구현하지 않습니다.

## ❗왜 폐기했나요?
- 정책 리스크: 사용자가 앱을 떠나려는 순간(뒤로가기/종료) 광고가 보이면 탐색/종료를 방해하는 것으로 오인될 가능성이 큼. AdMob 정책(Disruptive Ads)에 저촉될 소지가 있습니다.
- UX 관점: 나가려는 사용자를 잡아세우는 느낌을 주어 만족도가 낮습니다.

> 결론: “종료 확인 팝업 안에서 광고를 보여주는” 패턴은 사용하지 않습니다.

## ✅ 지금 우리가 하는 방식(권장 대안)
- A) 홈/설정(Start 등)과 같이 안전한 화면: 뒤로가기는 시스템 기본 동작(종료/백그라운드). 별도의 종료 팝업 없음. 〈이미 앱에 적용됨〉
- B) 진행 중 작업 보호가 필요한 화면(예: Run 진행 중, 대량 삭제 등): 종료/확인 팝업은 유지하되, “광고는 넣지 않음”.
- C) 수익화는 자연스러운 지점에서:
  - 하단 고정 배너(Anchored Adaptive Banner) — 현재 전역 패턴으로 적용됨.
  - 인피드 네이티브 카드(선택): 기록/리스트 끝 또는 섹션 사이 등 자연스러운 위치에 ‘광고’ 라벨을 명시하고 노출. 종료·네비게이션 흐름과 분리할 것.

## 🔄 마이그레이션 체크리스트(이 패턴을 쓰고 있었다면)
- [x] 뒤로가기 핸들러에서 ‘NativeExitPopup’ 호출 제거 〈StartActivity에 적용 완료〉
- [x] 종료 팝업이 필요한 화면에서도 광고 섹션 삭제(확인/취소만 남김)
- [x] UMP(동의) 완료 전 광고 로드 금지(현 구조 유지)
- [x] 네이티브 광고는 필요한 경우에만 인피드 용도로 유지. 불필요하면 NativeAdManager 프리로드 호출 제거로 용량/네트워크 최적화
- [x] 하단 배너는 BaseScreen/예측 높이 기반 컨테이너로 고정, 콘텐츠와 명확히 분리(회색 gap + 헤어라인)

## 📐 배치 가이드(요약)
- 절대 금지: 종료 팝업/나가기 흐름 근처에서 광고 노출
- 권장: 
  - 배너: 화면 하단 고정(현재 구현과 동일)
  - 네이티브: 리스트/콘텐츠 맥락 안, ‘Ad/광고’ 라벨 표기, 너무 주요 CTA와 밀착 금지
- 빈도/쿨다운/동의: 기존 정책 유틸(UMP/쿨다운/일일 캡) 그대로 준수

## ✅ 수용 기준(업데이트 버전)
- 뒤로가기 시 ‘광고 없는’ 종료 흐름 유지(홈 계열 화면은 팝업 없이 바로 종료)
- 종료/확인 팝업이 있는 화면에도 광고 UI가 없음
- 배너는 콘텐츠와 명확히 분리(회색 gap + 헤어라인), 시스템 인셋/IME와 겹치지 않음
- 네이티브(선택 사용)는 인피드 맥락에서만 노출, 라벨 필수, 빈도/쿨다운 준수

## 🧭 프로젝트 적용 현황
- StartActivity: 종료 팝업 제거(선택 A) — 적용 완료
- Run/Quit: 진행 보호 목적의 흐름 유지, 팝업/화면 내 광고 미사용
- 전역 배너: BaseScreen 컨테이너로 일관 적용(예측 높이 + 내비/IME 대응)

## 🧰 참고(코드 측 정리 팁)
- 뒤로가기 팝업 제거: BackHandler 훅과 NativeExitPopup 호출/상태를 삭제
- NativeAdManager는 인피드 용도만 남기고, 종료 팝업 연결 로직은 유지하지 않음
- 문구/리소스: ‘광고’ 라벨은 strings.xml로 관리(다국어)

## 🗂 변경 이력
| 버전 | 날짜 | 변경 내용 |
|------|------|-----------|
| v2.0.0 | 2025-10-26 | 문서 폐기 전환. 종료 팝업 내 광고 금지, 대체 가이드·마이그레이션 추가 |
| v1.0.0 | 2025-01-19 | 초판: 뒤로가기 네이티브 광고 팝업 구현 가이드 |

---

### (부록) 여전히 네이티브 광고를 쓰고 싶다면?
- 종료/네비게이션 흐름과 분리된 인피드 위치에서만 사용합니다.
- 기본 원칙
  - ‘광고/Ad’ 라벨 항상 표시
  - 주요 상호작용 버튼과 충분한 간격 유지
  - 빈도/쿨다운, UMP 동의 준수
- 구현은 기존 `NativeAdManager`/`NativeViewBinder`를 재사용하되, 팝업이 아닌 리스트/상세 등 자연스러운 지점에 배치하세요.
