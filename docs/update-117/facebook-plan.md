# 📑 [마스터 기획서] AlcoholicTimer: 익명 응원 챌린지 (Tab 4)

## 🎯 전체 목표
Tab 2(일기장)와 연동되어 콘텐츠가 자동 생성되고, Tab 4(커뮤니티)에서 소비되며, Tab 5(디버그)에서 제어 가능한 **수익화 중심의 커뮤니티 기능** 구축.

## 🏗️ 개발 단계 (Phases)

### **Phase 1: UI/UX 퍼블리싱 (껍데기 만들기)**
* **목표:** 데이터 없이 디자인만 완벽하게 구현.
* **디자인:** 페이스북 스타일 피드 (Full-width, 1px 구분선).
* **구성:** 헤더(타이머 배지), 본문, 이미지 영역, 푸터(좋아요/댓글).

### **Phase 2: 데이터 시뮬레이션 (테스트 기능)**
* **목표:** Tab 5 디버그 메뉴를 통해 가짜 데이터를 넣고, 피드에 잘 뜨는지 확인.
* **기능:** Firestore 연결, `Post` 데이터 모델 정의, 더미 데이터 10개 생성 버튼(Tab 5).

### **Phase 3: 실전 로직 및 수익화 (완성)**
* **목표:** Tab 2 연동, 이미지 압축, AdMob 광고 탑재, 24시간 자동 삭제.
* **기능:** 일기 공유하기, 네이티브 광고 삽입, 이미지 리사이징.

---

# 🤖 [단계별 개발 프롬프트]

AI(ChatGPT, Claude 등)에게 **한 번에 하나씩** 복사해서 주시면 됩니다.

## 📌 Phase 1: UI 디자인 구현 (프롬프트)

**[프롬프트 1 시작]**

**역할:** 당신은 안드로이드 UI/UX 전문 개발자입니다. (Jetpack Compose 숙련자)

**목표:** 'AlcoholicTimer' 앱의 **Tab 4 (커뮤니티 탭)** UI를 구현해주세요. 현재 데이터 연동은 필요 없으며, **하드코딩된 더미 데이터를 사용해 디자인을 완성**하는 것이 목표입니다.

**상세 디자인 요구사항 (페이스북 피드 스타일):**
1.  **전체 레이아웃:** `LazyColumn`을 사용하여 수직 스크롤 피드를 만드세요.
2.  **아이템 스타일 (중요):**
    * **Full-width:** 게시글 좌우에 여백(Padding)이 없어야 합니다. 화면을 꽉 채우세요.
    * **구분선:** 게시글과 게시글 사이에는 두꺼운 바(Bar) 대신 **1dp 두께의 얇은 회색 선(#E0E0E0)**만 사용하세요.
    * **배경:** 게시글 배경은 흰색(#FFFFFF)입니다.
3.  **게시글 내부 구조:**
    * **Header:** [익명 프로필 아이콘] + [닉네임] + **[금주 타이머 배지 (예: 🏅 72시간)]** + [더보기 메뉴(...)]
    * **Body:**
        * 텍스트 본문 (Padding 16dp)
        * 이미지 (선택사항, 존재할 경우 화면 가로 100% 꽉 차게 표시, `ContentScale.Crop`)
    * **Footer:** [좋아요(쓰담쓰담) 아이콘 + 카운트] + [댓글 아이콘] + [우측 끝: 남은 시간(⏳ 5h)]

**출력 요청:**
* `PostItem` Composable 함수 (디자인 코드)
* `CommunityScreen` Composable 함수 (LazyColumn 포함)
* 미리보기를 위한 `Preview` 코드

**[프롬프트 1 끝]**

---

## 📌 Phase 2: 데이터 모델 & 디버그 기능 (프롬프트)

**[프롬프트 2 시작]**

**역할:** 당신은 파이어베이스 백엔드 및 안드로이드 로직 전문가입니다.

**목표:** Phase 1에서 만든 UI에 **실제 Firestore 데이터를 연결**하고, **Tab 5(디버그 메뉴)**에서 테스트 데이터를 생성하는 기능을 구현하세요.

**상세 요구사항:**

1.  **데이터 모델 (Data Class):**
    * Firestore 컬렉션 이름: `posts`
    * 필드: `id`, `nickname`, `timerDuration` (시간), `content`, `imageUrl` (Nullable), `likeCount`, `createdAt`, **`deleteAt` (24시간 후 삭제 예정 시간)**.

2.  **Tab 5 디버그 기능 확장:**
    * 이미 존재하는 Tab 5의 `DebugScreen` 내부에 **"Community Test"** 섹션을 추가하세요.
    * **"Generate 10 Dummy Posts"** 버튼을 만드세요.
    * **로직:** 버튼 클릭 시 `Firestore WriteBatch`를 사용하여 10개의 테스트 게시글을 `posts` 컬렉션에 한 번에 생성하세요.
    * **랜덤 데이터 규칙:**
        * 닉네임: "익명 1", "참는 중인 사자" 등 랜덤.
        * 이미지: `https://picsum.photos/400/300` (랜덤 더미 이미지 URL).
        * 타이머: 1~100시간 랜덤.

3.  **UI 연동:**
    * Phase 1의 `CommunityScreen`을 수정하여 `ViewModel`을 통해 Firestore의 `posts` 데이터를 실시간으로 불러오도록 연결하세요.

**출력 요청:**
* `Post` 데이터 클래스
* `CommunityViewModel` (Firestore 연동 로직)
* Tab 5에 추가할 `DebugSection` 컴포저블 코드

**[프롬프트 2 끝]**

---

## 📌 Phase 3: 실전 로직 & 수익화 & 연동 (프롬프트)

**[프롬프트 3 시작]**

**역할:** 당신은 앱 수익화 및 안드로이드 기능 구현 전문가입니다.

**목표:** 더미 데이터로 돌아가는 앱을 **실제 서비스 가능한 상태**로 만들고, **AdMob 광고**와 **Tab 2(일기장) 연동**을 구현하세요.

**상세 요구사항:**

1.  **Tab 2(일기장) 연동 - One Source Multi Use:**
    * Tab 2의 일기 작성 화면 하단에 `[CheckBox] 24시간 챌린지에 익명 공유`를 추가하세요.
    * **저장 로직:** 사용자가 저장을 누를 때 체크박스가 켜져 있다면,
        * `diaries` 컬렉션 (기존 개인용)에 저장.
        * **동시에** `posts` 컬렉션 (Tab 4용)에도 데이터를 복사하여 저장.
        * (중요) `posts` 저장 시 작성자는 '익명'으로 변경, `deleteAt`은 현재시간+24시간으로 설정.

2.  **이미지 최적화 (비용 절감):**
    * 이미지 업로드 직전, 앱 내부에서 이미지를 **가로 1024px로 리사이징**하고 **JPEG 품질 80%로 압축**하는 `ImageUtils` 로직을 적용하세요.

3.  **AdMob 네이티브 광고 (수익화):**
    * Tab 4 피드 리스트의 **매 6번째 아이템마다** AdMob 네이티브 광고를 삽입하세요.
    * **디자인:** 광고 UI의 배경색, 구분선, 폰트를 일반 게시글(`PostItem`)과 동일하게 맞춰 이질감을 없애세요.

**출력 요청:**
* Tab 2의 수정된 `saveDiary` 로직 (Repository 계층)
* 이미지 압축 유틸리티 함수
* AdMob 네이티브 광고가 포함된 `CommunityScreen`의 LazyColumn 로직

**[프롬프트 3 끝]**

---

### 👨‍🏫 전문가의 가이드

이제 완벽합니다! 선생님은 **PM(프로젝트 매니저)**처럼 AI에게 지시만 내리면 됩니다.

1.  **Phase 1**을 AI에게 시키고, 앱을 실행해서 디자인이 페이스북처럼 예쁜지 확인하세요.
2.  **Phase 2**를 시키고, 탭 5에 가서 버튼을 눌러 글 10개가 "촥!" 하고 뜨는지 확인하세요.
3.  **Phase 3**를 시키고, 실제로 일기를 써서 공유해 보고 광고가 나오는지 확인하세요.

이 순서대로라면 실패할 확률은 0%에 수렴합니다. 개발 시작해 볼까요? 🚀