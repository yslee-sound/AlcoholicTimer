선생님, 정말 현명한 판단입니다! **"서버에 무거운 사진 대신 가벼운 번호표(숫자)만 저장한다"**는 이 전략은 앱의 속도와 비용 효율성을 극대화하는 최고의 선택입니다.

개발의 효율성을 위해 **준비(수작업) -> 뼈대(로직) -> 꾸미기(UI)** 3단계(Phase)로 나누어 정리했습니다.

특히 **Phase 1**은 선생님이 직접 해주셔야 하는 '재료 준비' 단계이므로 아주 상세하게 적어두었습니다.

---

# 🚀 [개발 로드맵] 프리셋 아바타 시스템 구축

## 📌 Phase 1: 아바타 이미지 준비 (수작업 필수) 🎨

AI에게 코드를 짜달라고 하기 전에, 앱 안에 **사용할 이미지 파일**이 실제로 들어있어야 합니다. 이 과정은 선생님이 직접 해주셔야 합니다.

### **[따라하기 가이드]**

1.  **이미지 구하기:**
    * 무료 아이콘 사이트(예: Flaticon)에서 'Animal avatar', 'Cute face' 등을 검색합니다.
    * 마음에 드는 아이콘 **6개 ~ 10개** 정도를 다운로드합니다 (PNG 형식, 512px 크기 추천).
    * *팁: 저작권 걱정 없는 무료 이미지를 쓰세요.*

2.  **파일 이름 바꾸기 (중요!):**
    * 다운로드한 파일들의 이름을 **규칙적으로** 바꿔주세요. 코딩할 때 아주 편해집니다.
    * `avatar_0.png` (기본값)
    * `avatar_1.png`
    * `avatar_2.png`
    * ...
    * `avatar_9.png`
    * *주의: 파일 이름에 대문자, 공백, 특수문자 금지 (소문자와 언더바 `_` 만 사용)*

3.  **안드로이드 스튜디오에 넣기:**
    * 안드로이드 스튜디오 왼쪽 프로젝트 창에서 `app` > `src` > `main` > `res` > **`drawable`** 폴더를 찾으세요.
    * 방금 이름 바꾼 이미지 파일들을 복사(Ctrl+C)해서 `drawable` 폴더에 붙여넣기(Ctrl+V) 하세요.
    * *확인: `drawable` 폴더를 열었을 때 `avatar_0.xml` (또는 png) 등이 보이면 성공입니다.*

---

## 📌 Phase 2: 아바타 관리자 & 데이터 모델 (AI 프롬프트) ⚙️

이미지가 준비되었으니, 이제 AI에게 **"이 이미지들을 관리하는 장부(Manager)를 만들고, 서버에는 숫자만 저장하게 해줘"**라고 시키는 단계입니다.

**[프롬프트 복사]**

***

**[프롬프트 시작]**

**역할:** 당신은 안드로이드 아키텍처 전문가입니다.

**목표:** 'AlcoholicTimer' 앱에서 사용자 프로필 사진을 **'프리셋 아바타 선택 방식'**으로 구현하기 위한 **데이터 관리 로직**을 작성해 주세요.

**상세 요구사항:**

1.  **AvatarManager (Singleton Object):**
    * `res/drawable`에 있는 아바타 리소스들을 관리하는 싱글톤 객체 `AvatarManager`를 만드세요.
    * `val avatarList = listOf(R.drawable.avatar_0, R.drawable.avatar_1, ...)` 형태로 리스트를 정의하세요. (Phase 1에서 10개의 이미지를 넣었다고 가정하고 작성해 주세요).
    * 인덱스 번호(Int)를 넣으면 리소스 ID(Int)를 반환하는 함수 `getAvatarResId(index: Int): Int`를 만드세요. (유효하지 않은 인덱스가 들어오면 기본값 0번을 반환하도록 예외 처리 필수).

2.  **데이터 모델 수정:**
    * **`User` (Firestore 모델):** 프로필 이미지 URL 대신 `avatarIndex: Int` (기본값 0) 필드를 추가하세요.
    * **`Post` (게시글 모델):** 작성자의 프로필 URL 대신 `authorAvatarIndex: Int` (기본값 0) 필드를 추가하세요.

3.  **Repository 로직 수정:**
    * `UserRepository` (또는 Settings 관련): 사용자가 아바타를 변경하면 Firestore의 `avatarIndex` 필드만 업데이트하는 함수 `updateAvatar(index: Int)`를 작성하세요.
    * **Tab 4 게시글 작성 시:** 글을 저장할 때(`addPost`), 현재 사용자의 `avatarIndex`를 가져와서 `Post` 데이터에 함께 저장하는 로직을 작성하세요.

**출력 요청:**
* `AvatarManager` 객체 코드
* 수정된 `User`, `Post` 데이터 클래스
* `updateAvatar` 및 `addPost` 함수 로직

**[프롬프트 끝]**

***

---

## 📌 Phase 3: UI 구현 - 선택창과 표시창 (AI 프롬프트) 🖼️

마지막으로 눈에 보이는 화면을 만듭니다. Tab 5에서 선택하고, Tab 4에서 보여주는 기능입니다.

**[프롬프트 복사]**

***

**[프롬프트 시작]**

**역할:** 당신은 안드로이드 Jetpack Compose UI 전문가입니다.

**목표:** Phase 2에서 만든 로직을 바탕으로 **아바타 선택 다이얼로그(Tab 5)**와 **게시글 프로필 표시(Tab 4)** UI를 구현해 주세요.

**상세 요구사항:**

1.  **Tab 5 (SettingsScreen) - 아바타 선택:**
    * 화면 상단에 현재 설정된 아바타 이미지를 원형으로 크게 보여주세요.
    * 클릭 시 `AvatarSelectionDialog`가 뜨도록 하세요.
    * **다이얼로그 UI:** `LazyVerticalGrid` (컬럼 3~4개)를 사용하여 `AvatarManager`에 있는 모든 아바타를 보여주세요.
    * 사용자가 아바타를 클릭하면 해당 인덱스를 저장하고 다이얼로그를 닫으세요.

2.  **Tab 4 (CommunityScreen) - 프로필 표시:**
    * `PostItem` (게시글 카드)의 프로필 영역을 수정하세요.
    * 기존의 `AsyncImage`(URL 로딩)를 제거하고, `Image(painter = painterResource(id = AvatarManager.getAvatarResId(post.authorAvatarIndex)))`를 사용하여 **로컬 이미지**를 로딩하세요.
    * 글쓰기 입력창 상단의 '내 프로필' 영역에도 현재 나의 아바타가 나오도록 수정하세요.

3.  **Tab 2 (DiaryScreen) 연동:**
    * 일기 공유 시에도 `authorAvatarIndex`가 올바르게 저장되도록 뷰모델 로직을 점검해 주세요.

**출력 요청:**
* `AvatarSelectionDialog` Composable 함수
* 수정된 `SettingsScreen` (프로필 섹션)
* 수정된 `PostItem` (프로필 이미지 표시 부분)

**[프롬프트 끝]**

***

### 👨‍🏫 전문가의 조언 (진행 순서)

1.  지금 당장 구글이나 Flaticon에서 **귀여운 동물 아이콘 5~6개**만이라도 다운받아서 **[Phase 1]**을 끝내세요. (이게 없으면 AI가 코드를 짜줘도 빨간 줄(에러)이 뜹니다.)
2.  그다음 **[Phase 2] 프롬프트**를 AI에게 주어 로직을 잡습니다.
3.  마지막으로 **[Phase 3] 프롬프트**를 주어 화면을 완성합니다.

이 방식이면 서버 비용 0원으로 아주 훌륭한 프로필 시스템이 만들어집니다! 준비되시면 바로 시작해 보세요! 🚀